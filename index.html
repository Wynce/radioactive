<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Radioactive Decay Simulation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f8ff;
      padding: 2rem;
      margin: 0;
      text-align: center;
    }
    h1 {
      color: #006064;
    }
    .controls {
      margin-top: 1.5rem;
    }
    input[type="range"] {
      width: 60%;
    }
    .output {
      margin-top: 2rem;
      font-size: 1.2rem;
      color: #004d40;
    }
    canvas {
      margin-top: 2rem;
      max-width: 100%;
    }
  </style>
</head>
<body>
  <h1>Radioactive Decay Simulation</h1>
  <p>Adjust the half-life and click simulate to visualize radioactive decay over time.</p>

  <div class="controls">
    <label for="halfLife">Half-life (seconds): <span id="halfLifeVal">5</span></label><br>
    <input type="range" id="halfLife" min="1" max="20" value="5" />
    <br><br>
    <button onclick="runSimulation()">Simulate Decay</button>
  </div>

  <div class="output" id="resultBox"></div>

  <canvas id="decayChart" width="600" height="300"></canvas>

  <script>
    const halfLifeSlider = document.getElementById('halfLife');
    const halfLifeDisplay = document.getElementById('halfLifeVal');
    halfLifeSlider.oninput = () => {
      halfLifeDisplay.textContent = halfLifeSlider.value;
    };

    function runSimulation() {
      const halfLife = parseInt(halfLifeSlider.value);
      const totalAtoms = 1000;
      const timeSteps = 20;
      const resultBox = document.getElementById('resultBox');
      const chart = document.getElementById('decayChart').getContext('2d');

      let dataPoints = [];
      let atomsLeft = totalAtoms;

      resultBox.innerHTML = '';
      for (let t = 0; t <= timeSteps; t++) {
        let decayFactor = Math.pow(0.5, t / halfLife);
        let atoms = Math.round(totalAtoms * decayFactor);
        dataPoints.push({ t, atoms });
        resultBox.innerHTML += `Time ${t}s: ${atoms} atoms remaining<br>`;
      }

      // Draw the chart manually (no external libraries)
      drawDecayChart(chart, dataPoints);
    }

    function drawDecayChart(ctx, data) {
      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);

      // chart margins
      const padding = 40;
      const w = ctx.canvas.width - padding * 2;
      const h = ctx.canvas.height - padding * 2;

      // axis
      ctx.strokeStyle = "#333";
      ctx.lineWidth = 1.5;
      ctx.beginPath();
      ctx.moveTo(padding, padding);
      ctx.lineTo(padding, h + padding);
      ctx.lineTo(w + padding, h + padding);
      ctx.stroke();

      // plot line
      ctx.strokeStyle = "#00796B";
      ctx.lineWidth = 2;
      ctx.beginPath();

      data.forEach((point, i) => {
        const x = padding + (i / data.length) * w;
        const y = padding + h - (point.atoms / 1000) * h;
        if (i === 0) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      });

      ctx.stroke();

      // labels
      ctx.fillStyle = "#000";
      ctx.font = "12px Arial";
      ctx.fillText("0", padding - 10, h + padding + 15);
      ctx.fillText("Time →", w + padding - 40, h + padding + 20);
      ctx.fillText("↑ Atoms", padding - 35, padding + 10);
    }
  </script>
</body>
</html>
